var quiztitle = "Technical Requirement Writing Knowledge Test";



 var quiz = [
    {
        "question" : "Q1: Technical requirements define what is required in the design, they do not define how to create the design?",
        "image" : "",
        "choices" : [
                                "C1 Necessary", "C2 Appropriate", "C3 Unambiguous", "C4 Complete"
                    ],
        "correct" : "C2 Appropriate",
        "explanation" : "Placed in the correct requirement set. Additionally, technical requirements define what is required in the design. They do not define how to create the design as is done with procedures.",
    },

    {
        "question" : "Q2: A requirement is necessary (needed in the set of requirements) if",
        "image" : "",
        "choices" : [
                        "A – the requirement can be removed and the remaining set will still result in the entity needs being satisfied.",
                        "B – the intent of the requirement will be met by the implementation of other requirements", 
                        "C – the author cannot communicate the reason for the requirement",
                        "D – a requirement must be able to be traced to a source which could be one or more entity need(s) or higher-level allocated requirement"
                    ],
        "correct" : "D – a requirement must be able to be traced to a source which could be one or more entity need(s) or higher-level allocated requirement",
        "explanation" : "If requirement can be removed, met by implementation of other requirements or cannot be communicated then this requirement is not necessary",
    },
    {
        "question" : "Q3: Which rule in the following requirement is violated (The Identity of the Customer shall be confirmed)?",
        "image" : "",
        "choices" : [
                        "R2 Use an Active Voice", "R4 Use Defined Terms", "R14 Use Correct Spelling", "R24 Do Not Use Generalizations"
                    ],
        "correct" : "R2 Use an Active Voice",
        "explanation" : "When an action is required, start with the verb. ...",
    },
    {
        "question" : "Q4: What is the issue with the following requirement: (The Operation Logger shall record any warning messages produced by the system)?",
        "image" : "",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "R34 Use (EACH)",
        "explanation" : "The use of (all), (both), or (any) is confusing because it is hard to distinguish applicability to the whole set or to each element of the set. The word (each) is more explicit",
    },
    {
        "question" : "Q5: You should Avoid Words that words that join clauses, such as  (and) ,(or) ,(then) ,(unless) ,(but) ,(/) ,(as well as) ,(but also) ,(however) ,(whether) ,(meanwhile) ,(whereas) ,(on the other hand) and  ,(otherwise) because ",
        "image" : "",
        "choices" : [
                        "Requirements should be quantified precisely.", "they are confusing", "Their presence in a requirement usually indicates that multiple requirements should be written", "Use (EACH) only"
                    ],
        "correct" : "Their presence in a requirement usually indicates that multiple requirements should be written",
        "explanation" : "Their presence in a requirement usually indicates that multiple requirements should be written. See Rule 20 for elaboration",
    },
    {
        "question" : "Q6: What is the issue with the following requirement: (The Operation Logger shall record any warning messages produced by the system)?",
        "image" : "",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "R34 Use (EACH)",
        "explanation" : "The use of (all), (both), or (any) is confusing because it is hard to distinguish applicability to the whole set or to each element of the set. The word (each) is more explicit",
    },
    {
        "question" : "Q4: What is the issue with the following requirement: (The Operation Logger shall record any warning messages produced by the system)?",
        "image" : "",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "R34 Use (EACH)",
        "explanation" : "The use of (all), (both), or (any) is confusing because it is hard to distinguish applicability to the whole set or to each element of the set. The word (each) is more explicit",
    },
    {
        "question" : "Q4: What is the issue with the following requirement: (The Operation Logger shall record any warning messages produced by the system)?",
        "image" : "",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "R34 Use (EACH)",
        "explanation" : "The use of (all), (both), or (any) is confusing because it is hard to distinguish applicability to the whole set or to each element of the set. The word (each) is more explicit",
    },
    {
        "question" : "Q4: What is the issue with the following requirement: (The Operation Logger shall record any warning messages produced by the system)?",
        "image" : "",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "R34 Use (EACH)",
        "explanation" : "The use of (all), (both), or (any) is confusing because it is hard to distinguish applicability to the whole set or to each element of the set. The word (each) is more explicit",
    },
    {
        "question" : "Q10: What is the issue with the following requirement:",
        "image" : "",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "R10 Avoid Open-Ended Clauses",
        "explanation" : "The use of (all), (both), or (any) is confusing because it is hard to distinguish applicability to the whole set or to each element of the set. The word (each) is more explicit",
    },
    {
        "question" : "Q11: In the new template, the submittals are divided to the following:",
        "image" : "",
        "choices" : [
                        "Action, Product Data, Drawings, Informational, Quality", 
                        "Action, Informational, Closeout, and Maintenance Material", 
                        "Quality, Product, Datasheet, Report, Records", 
                        "Action, Managerial, Drawings, Informational, Quality"
                    ],
        "correct" : "Action, Managerial, Drawings, Informational, Quality",
        "explanation" : "[ Action, Informational, Closeout, and Maintenance Material See attached template Section 1.5, 1.6, 1.7, 1.8]",
    },
    {
        "question" : "Q12: What is the issue with the following requirement: To ensure that the surcharge is correct, the final level shall be checked after completion of the first few meters and then at frequent intervals. ?",
        "image" : "",
        "choices" : [
                        "R3 Assign to the Correct Level of Detials", "R5 Quantify Precisely", "R6 Use Appropriate Unit", "R4 Use Defined Terms"
                    ],
        "correct" : "R5 Quantify Precisely",
        "explanation" : "Quantify Precisely avoid the use of any some several few. Mention the required Distance.  Review Rule 5) Quantify Precisely",
    },
    {
        "question" : "Q13: What is the issue with the following requirement:",
        "image" : "theymistake.JPG",
        "choices" : [
                        "R10 Avoid Open-Ended Clauses", "R13 Use Correct Grammar", "R19 Use a Single Sentence", "R21 Use Bracket to Combine Conditions"
                    ],
        "correct" : "R13 Use Correct Grammar",
        "explanation" : "The use of correct grammer Rule 13. be they structural or non-structural",
    },
    {
        "question" : "Q14: What is the issue with the following requirement:?",
        "image" : "confusing.JPG",
        "choices" : [
                        "C3 ambiguous", "R17 Do Not Use (And/Or)", "R19 Use a Single Sentence", "R34 Use (EACH)"
                    ],
        "correct" : "C3 ambiguous",
        "explanation" : "The use of not always be practical or necessary is confusing and ambiguous",
    },

  



];


 var currentquestion = 0,
 score = 0,
 submt = true,
 picked;

 $(document).ready(function(){
   $("#submitbutton").hide();

 function htmlEncode(value) {
     return $(document.createElement('div')).text(value).html();
 }


 function addChoices(choices) {
     if (typeof choices !== "undefined" && $.type(choices) == "array") {
         $('#choice-block').empty();
         for (var i = 0; i < choices.length; i++) {
             $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
         }
     }
 }

 function nextQuestion() {
     submt = true;
   //  alert("nQ");
     $('#explanation').empty();
     $('#question').text(quiz[currentquestion]['question']);
     $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
     if (quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != "") {
         if ($('#question-image').length == 0) {
             $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
         } else {
             $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
         }
     } else {
         $('#question-image').remove();
     }
     addChoices(quiz[currentquestion]['choices']);
     setupButtons();


 }


 function processQuestion(choice) {
    // alert(choice);
     currentquestion++;
    //  alert(currentquestion);
     $("#submitbutton").hide();

         if (currentquestion == quiz.length) {
             endQuiz();
         } else {

             nextQuestion();
         }

 }


 function setupButtons() {
     $('.choice').on('mouseover', function () {
         $(this).css({
             'background-color': '#e1e1e1'
         });
     });
     $('.choice').on('mouseout', function () {
         $(this).css({
             'background-color': '#fff'
         });
     })
     $('.choice').on('click', function () {
        // alert("");
         choice = $(this).attr('data-index');
         $('.choice').removeAttr('style').off('mouseout mouseover');
         $(this).css({
             'border-color': '#222',
             'font-weight': 700,
             'background-color': '#c1c1c1'
         });
         if (quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']) {
         $('.choice').eq(choice).css({
             'background-color': '#50D943'
         });
         $('#explanation').html('<strong>Correct!</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
         score++;
     } else {
         $('.choice').eq(choice).css({
             'background-color': '#D92623'
         });
         $('#explanation').html('<strong>Incorrect.</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
     }
            $("#submitbutton").show();
         if (submt) {
            // alert("submit");
             submt = false;
             $('#submitbutton').css({
                 'color': '#000'

             });
             $("#submitbutton").click(function(){
              // alert("click");
                  $('.choice').off('click');
                 $(this).off('click');
                 processQuestion(choice);
             });
         }
     })
 }


 function endQuiz() {
     $('#explanation').empty();
     $('#question').empty();
     $('#choice-block').empty();
     $('#submitbutton').remove();
     $('.container').remove();
     $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
     $(document.createElement('h2')).css({
         'text-align': 'center',
         'font-size': '4em'
     }).text(Math.round(score / quiz.length * 100) + '%').insertAfter('#question');
 }


 function init() {
     //add title
     if (typeof quiztitle !== "undefined" && $.type(quiztitle) === "string") {
         $(document.createElement('h1')).text(quiztitle).appendTo('#frameH');
         
     } else {
         $(document.createElement('h1')).text("Quiz").appendTo('#frame');
     }

     //add pager and questions
     if (typeof quiz !== "undefined" && $.type(quiz) === "array") {
         //add pager
         $(document.createElement('p')).addClass('pager').attr('id', 'pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
         //add first question
         $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
         //add image if present
         if (quiz[0].hasOwnProperty('image') && quiz[0]['image'] != "") {
             $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
         }
         $(document.createElement('p')).addClass('explanation').attr('id', 'explanation').html('&nbsp;').appendTo('#frame');

         //questions holder
         $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');

         //add choices
         addChoices(quiz[0]['choices']);

         //add submit button
         $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Next Question').css({
             'font-weight': 700,
             'color': '#222',
             'padding': '30px 0',
          }).appendTo('#frame');


       $("#submitbutton").hide();
         setupButtons();
     }
 }

 init();
});
